@startuml
'https://plantuml.com/sequence-diagram
!include ../../Style.puml

autonumber

title Sequence Diagram of `workout /update` Command
hide footbox

participant "werkIt:WerkIt" AS WerkIt
participant "updateCommand\n:WorkoutCommand" AS updateCommand
participant "workoutList\n:WorkoutList" AS WorkoutList
participant "ui:UI" AS UI2
participant "planList\n:PlanList" AS PlanList
participant "fileManager\n:FileManager" as FileManager

activate WerkIt
ref over WerkIt
Obtain and parse user input.
end

WerkIt -> updateCommand : execute()
activate updateCommand
updateCommand -> WorkoutList : getCurrentWorkout(userArguments)
activate WorkoutList
ref over WorkoutList
Find workout which will be updated.
end
updateCommand <-- WorkoutList : currentWorkout:String
deactivate WorkoutList

updateCommand -> WorkoutList : updateWorkout(userArguments)
activate WorkoutList
ref over WorkoutList
Update workout with new number
of repetitions specified by user.
end
updateCommand <-- WorkoutList : updatedWorkout:Workout
deactivate WorkoutList

updateCommand -> UI2 : printUpdateWorkoutMessage(updatedWorkout)
activate UI2
updateCommand <-- UI2
deactivate UI2

updateCommand -> PlanList : updatePlanContainsUpdatedWorkout(currentWorkout, updatedWorkout)
activate PlanList
ref over PlanList
Find whether the updated workout
is in any plan. If such plan exist,
update the planList.
end
updateCommand <-- PlanList
deactivate PlanList

updateCommand -> FileManager : rewriteAllWorkoutsToFile(workoutList)
activate FileManager
ref over FileManager
Rewrite modified workoutList
data into file on user's system
end
updateCommand <-- FileManager
deactivate FileManager

updateCommand -> FileManager : rewriteAllPlansToFile(planList)
activate FileManager
ref over FileManager
Rewrite modified planList
data into file on user's system
end
updateCommand <-- FileManager
deactivate FileManager

WerkIt <-- updateCommand
deactivate updateCommand

destroy deleteCommand
@enduml